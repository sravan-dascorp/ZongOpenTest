using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.AI;

public class SceneController : MonoBehaviour //this was suppsoe dto be acentaralises cene scontrolelr for now its is just rabbit
{
    public Transform player;
    public float followDistance = 10f;

    public float destroyDistance = 1f;

    [SerializeField]  NavMeshAgent navMeshAgent;
    [SerializeField] Animator rabitAnim;
    [SerializeField] Transform Destination;


void Awake()
{
    
}

    void Start()
    {
        navMeshAgent = GetComponent<NavMeshAgent>();
         StartCoroutine(Rabbit());
    }


    public void SpawnRabbit(Transform position) //
    {
       
    }


    IEnumerator Rabbit()
    {


        while (true)
        {
            float distance = Vector3.Distance(transform.position, player.position);

            if (distance > followDistance)
            {
                
                //navMeshAgent.SetDestination(Destination.position);
                navMeshAgent.isStopped = true;
                 rabitAnim.SetBool("isRunning",false); 
                
            }
            else if(navMeshAgent.isStopped && Vector3.Distance(transform.position, player.position)<(followDistance -3f))
            {
               
                navMeshAgent.isStopped = false;
                navMeshAgent.SetDestination(Destination.position);
                rabitAnim.SetBool("isRunning",true); 
            }

            if (Vector3.Distance(navMeshAgent.transform.position,Destination.position) < 2f)
            {
                
                navMeshAgent.gameObject.SetActive(false);
                yield break; 
            }

            yield return null;
        }


    }



    //scene sequence stuff


    void ShowUiAfterFirstItem(Items_SO item)
    {
        if(item.ItemID == 100)
        {
            UIManager.Instance.ShowMainUI(true);
        }
    }



    



}
